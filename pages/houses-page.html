<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/pages/sidebar-layout.html">
<link rel="import" href="/bower_components/core-ajax/core-ajax.html">
<link rel="import" href="/bower_components/paper-fab/paper-fab.html">
<link rel="import" href="/bower_components/core-icon/core-icon.html">
<link rel="import" href="/bower_components/core-icons/core-icons.html">

<polymer-element name="houses-page">
  <template>
  <style>
    paper-fab#add {
      position: absolute;
      right: 20px;
      bottom: 20px;
    }
  </style>
    <sidebar-layout selected="home">
      <div class="title">Territory Houses</div>
      <template repeat="{{h in data}}">
      	<a href="#/houseview/{{h.HouseId}}">
          {{h.HouseId}} {{h.T}}{{h.C1}}-{{h.C2}}-{{h.C3}} {{h.AE}} {{h.R}} {{h.NE}}
        </a>
      </template>
      <paper-fab id="add" icon="add" on-click="{{addClick}}"></paper-fab>

	    <core-ajax auto method="POST" url="/api/getHouses?TenantId=1" body='{}' handleAs="json" response="{{data}}"></core-ajax>

    </sidebar-layout>
  </template>
  <script>
  	Polymer({
  		handleResponse: function(evt, data) {
  			console.log(data);
  		},
      addClick: function (evt, d) {
        location.hash = "#/housenew";
      }
  	});
  </script>
</polymer-element>
